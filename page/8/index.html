<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Just Be Unreserved!" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Android Developer">
<meta property="og:type" content="website">
<meta property="og:title" content="Just Be Unreserved!">
<meta property="og:url" content="http://www.easydone.cn/page/8/index.html">
<meta property="og:site_name" content="Just Be Unreserved!">
<meta property="og:description" content="Android Developer">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Just Be Unreserved!">
<meta name="twitter:description" content="Android Developer">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"hide"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Just Be Unreserved! </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Just Be Unreserved!</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">学无止境。</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/11/06/" itemprop="url">
                  如果我是DNSPod的产品经理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-11-06T23:25:12+08:00" content="Nov 6 2013">
              Nov 6 2013
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/IT杂谈/" itemprop="url" rel="index">
                    <span itemprop="name">IT杂谈</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/11/06/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2013/11/06/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>   现在看来，DNSPod的技术、运营和客户满意度在国内都已经处于顶尖的位置，我觉得对于DNSPod这类以技术驱动的公司来讲，尤其是DNSPod是已经发展到现在这种规模和状态，产品经理这个职位其实并不像其他的互联网企业显得那么重要。不过，如果我做了阿D的产品经理，我可能会从以下几个方面去完善现在的DNSPod。</p>
<p>   一、我比较看重社区。我觉得阿D应该有自己的社区和论坛，开放的API和功能可以分为几个阶段，alpha,beta,release,standard等，先在社区论坛试用，通过招募测试员进行试用，给产品提出改进意见，然后根据意见的合理性程度进行评估整改。</p>
<p>   第三方的项目和插件也可以在社区有更大的发展，甚至通过奖励第三方开发者的方式，让他们与阿D一起给用户们提供更好的服务。我始终觉得一个优秀的产品索要照顾的不仅仅是客户，更是广大的用户。甚至可以邀请一些相关的开源团队或者项目，让他们为阿D的用户开发更好用的插件应用。</p>
<p>   二、目前DNSPod的客户群体应该主要还是集中于中小网站、站长和私人博客等，但是仍有许多人选择了其他家的解析服务，我觉得DNSPod可以试着去拓宽自己的客户群体。这就可能牵涉到另一个问题，域名解析无非看重三点：速度、稳定和安全。我觉得阿D的最大的特点，就是“专注”。阿D的解析速度和稳定性，我相信业界应该已经达成了共识，但是这个时候专注既是优势，却也成了劣势，专注于DNS解析领域，有时候会让人对于阿D的安全性会有一定的困惑。这个时候，我觉得阿D需要与一些注明的安全厂商携起手来（仅仅有安全宝可不够喔），加强安全方面的合作和探索。根据这个思路，阿D还可以试着与其他相关的企业去合作，如域名注册商，如CDN厂商，如IDC厂商等等，当然更加少不了电信运营商。</p>
<p>   三、移动互联网时代，我觉得有必要做一个Android<br>HD、iPad和WP HD客户端了，一些在电脑上能完成的操作，通过平板上的移动客户端一样可以实现。手机端屏幕太小，操作起来体验上应该不会好，有短信和微信报警通知就够了。</p>
<p>   四、我觉得最好有一个比较好的方式将站长们串联起来，让站长之间加强互动，使阿D的口碑在站长圈子里能够口口相传。阿D可以引导站长们在各自所在的城市做组织一些线下的交流活动，平时做一些技术交流分享；甚至阿D自己也可以做一些城市巡回活动，不需要搞的大张旗鼓，小圈子就可以，类似于GDG那样的。</p>
<p>   以上就是我的一些想法，当然都是一些很粗鄙的想法，作为产品小白，这也算是个开始吧，毕竟自己希望以后有机会去做产品。以后咱也算是混产品界的啦……=_=!!!</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/11/05/" itemprop="url">
                  获取程序所在目录代码解析
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-11-05T22:25:37+08:00" content="Nov 5 2013">
              Nov 5 2013
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/11/05/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2013/11/05/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我觉得，Shell对比其他的编程语言，最大的优势在于每个字符都包含有极大的信息量，其他语言可能要很长很多行代码才能实现的功能，Shell代码一行就能实现；而且一个可用的Shell脚本里几乎每个字符可能都无法更改，一旦更改，就会造成整个脚本不可用（当然，变换实现思路修改了整段代码的除外）。</p>
<p>今天下午熟悉线上环境的巡检脚本，看到这样一段代码，感觉挺有意思的，也很好的印证了我上面的观点。特意择出来分析一下这段代码包含的一些东西。这段代码网上几乎随处可见，而且极其精炼，几乎是改无可改了，呵呵。</p>
<p>这段代码是这样的：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Resolve links - $0 may be a symbolic link</span></span><br><span class="line">PRG=<span class="string">"<span class="variable">$0</span>"</span></span><br><span class="line"><span class="keyword">while</span> [ -h <span class="string">"<span class="variable">$PRG</span>"</span> ]; <span class="keyword">do</span></span><br><span class="line">        ls=`ls -ld <span class="string">"<span class="variable">$PRG</span>"</span>`</span><br><span class="line">        link=`expr <span class="string">"<span class="variable">$ls</span>"</span> : <span class="string">'.*-&gt; \(.*\)$'</span>`</span><br><span class="line">        <span class="keyword">if</span> expr <span class="string">"<span class="variable">$link</span>"</span> : <span class="string">'.*/.*'</span> &gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">                PRG=<span class="string">"<span class="variable">$link</span>"</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                PRG=`dirname <span class="string">"<span class="variable">$PRG</span>"</span>`/<span class="string">"<span class="variable">$link</span>"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">PRGDIR=`dirname <span class="string">"<span class="variable">$PRG</span>"</span>`  <span class="comment">#所执行程序所在的目录</span></span><br></pre></td></tr></table></figure></p>
<p>第一行是注释，很容易理解；最后一行就是这段脚本所要实现的目标，即获取一个可执行脚本程序所在的目录。</p>
<p>首先从脚本第一行可用代码来解释：PRG=”$0”，这里的PRG指的就是可执行脚本的文件名，当然也可能是指向这个脚本的软链接文件，这个在下面会做判断，暂且按下不表。先看软链接，那么什么又是软链接呢？</p>
<p>Linux下的链接分为两种：硬链接（Hard Link）和软链接（Symbolic Link），我们经常见到的link命令，就是用来创建Linux链接的，link默认创建的是硬链接，加上-s参数就是创建软链接。文件链接是Linux文件系统的一个重要特征。在这个脚本里指的就是软链接。</p>
<p>硬链接引用的文件在文件系统的物理索引，即inode；所以不管你是删除或者移动源文件，硬链接都不会被破坏，它引用的并不是文件在文件结构里的位置。这样的话，用户就不必需要拥有对源文件的访问权限，就防止了误删，只有所有的硬链接引用都被删除之后，才能把文件真正删除。这相当于是为源文件创建了一个别名，实际上源文件和链接文件是同一个文件，用ls -i查看其inode值，可以发现他们是一样的。 </p>
<p>软链接有点像Windows里的快捷方式，但又不一样。跟硬链接一样，编辑或者执行软链接文件，就等于是编辑或者执行了源文件。但是软链接文件与源文件是不同的两个文件，软链接文件只是指向源文件的一个指针，删除了软链接文件对源文件没有任何影响，删除了源文件，软链接文件也就没有了任何意义，cat查看的时候会提示文件不存在。另，软链接可以指向文件夹，硬链接却不可以。</p>
<p>紧接着是一个while循环，while [ -h “$PRO” ]; do …… done，参数-h的意思就是判断$PRO是否存在和$PRO是否是一个软链接文件，这个循环的意思就是当$PRO存在并且$PRO是一个软链接文件的时候，执行do …… done之间的脚本。</p>
<p>接下来就是expr这个函数了。这是Linux里一个很重要的命令，一般用于整数值计算，也可用于字符操作。</p>
<ol>
<li>整数计算里，运算符两边注意加空格即可，”*”符号要加”\”转义符；</li>
<li>循环里的expr用于增量计算。循环初始化为0，然后循环值加1，如下面的例子，从（expr）命令接受输出并将之作为输入的循环变量；</li>
<li>expr同样可以进行检测是个字符是否是数字；</li>
<li>模式匹配。在这个脚本里，expr的作用就是模式匹配，符号就是冒号”:”。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">link=`expr <span class="string">"<span class="variable">$ls</span>"</span> : <span class="string">'.*-&gt; \(.*\)$'</span>`</span><br></pre></td></tr></table></figure>
<p>这行代码的返回的就是”-&gt;;”后面的字符串，实际上也就是软链接指向的真实的文件名；<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> expr <span class="string">"<span class="variable">$link</span>"</span> : <span class="string">'.*/.*'</span> &gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">   PRG=<span class="string">"<span class="variable">$link</span>"</span></span><br></pre></td></tr></table></figure></p>
<p>这两行是为了判断$link是否是以”/“开头；<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PRGDIR=<span class="escape">`d</span>irname <span class="string">"$PRG"</span>`</span><br></pre></td></tr></table></figure></p>
<p>这行就是最后我们所想要的结果了。</p>
<p>至此，这段代码就分析完了。Shell里符号太多，不熟悉的话一眼看上去感觉好蒙啊，实际上每个字符都有很大的信息量，主要还是对这些字符的熟悉程度。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/11/03/" itemprop="url">
                  想要进行小说创作应该阅读哪些书籍能够提升能力？
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-11-03T13:22:03+08:00" content="Nov 3 2013">
              Nov 3 2013
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/随笔/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/11/03/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2013/11/03/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>昨天下午去参加了<a href="http://www.zhihu.com/people/jiang-fang-zhou" target="_blank" rel="external">蒋方舟</a>小姐的签售会，紧接着晚上就是阎连科老师的签售会，虽然书店离我住的地方非常远，为了等到阎老师的签名以至于回来的非常晚，但是也值了。感觉方舟同学没我想象中的漂亮啊（要骂我请偷偷的），谈吐很优雅很有气质，真正的出口成章，每签一个名，双手把书递给读者的时候都要抬头看着读者，太太太太有礼貌了。不过字写的没阎老师好看，我觉得也没我的好看……</p>
<p>听阎老师讲写作的淘汰，讲“迎光”“借光”“穿透光”三种类型的写作，讲浪费掉的自己最好的写作时光，我听的热泪盈眶；尤其是“最好的写作时光”那段，令人非常的动容。阎老师也是一位非常有趣的人，很好玩儿。</p>
<p>正如方舟妹妹（比我小两个月）讲的那样，阎老师真的是一位非常非常伟大的作家，“神实主义”，真的是特点非常鲜明，《炸裂志》刚看了第一章，我就觉得这书实在是太好了，首先，我得承认这种写作手法，对于我们这些普通人来讲，实在太难学了；不过，理解起来还是并不复杂，而且你会发自内心地觉得这浓浓的原始乡土野性，其实才是真正的阳春白雪。如果题主执意想学习这种风格的话，倒是可以挑战一下。</p>
<p>晚上有位同学向阎老师提了类似的问题，我想说阎老师的回答确实比现在最高票蒋小姐的回答要高好几个档次啊，不过有的人可能会觉得虚了点。阎老师的大意是这样的，不要把自己局限于读哪些书上，自己喜欢读什么就读什么，读金庸一样能成为大家。写作技巧和方法论的提高其实还是浅层次的，写作的关键在于去领悟作者的情怀和意境。举个不恰当的例子，今天下午方舟妹妹说，韩寒要拍电影了，所以就对他有点看法了（求不断章取义，求不借题发挥）；但是阎老师却经常兴致勃勃地与人谈论《甄嬛传》和各位小主。所谓艺术，并无高下之分，文学是艺术，绘画是艺术，影视同样也是艺术。用心去体味艺术作品内在的美妙，取其对自己有用的就好，完全不必纠结于读哪些书。</p>
<p>原文链接：<a href="http://www.zhihu.com/question/21429250/answer/19809569" target="_blank" rel="external">想要进行小说创作应该阅读哪些书籍能够提升能力？</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/10/31/" itemprop="url">
                  Linux挂载磁盘教程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-10-31T20:23:52+08:00" content="Oct 31 2013">
              Oct 31 2013
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/10/31/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2013/10/31/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###挂载前查看各分区基本情况：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="preprocessor"># df -h</span></span><br><span class="line">Filesystem            Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/xvda2             <span class="number">36</span>G  <span class="number">2.3</span>G   <span class="number">32</span>G   <span class="number">7</span>% /</span><br><span class="line">tmpfs                  <span class="number">15</span>G     <span class="number">0</span>   <span class="number">15</span>G   <span class="number">0</span>% /dev/shm</span><br></pre></td></tr></table></figure></p>
<p>###查看各磁盘基本情况：<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="comment">@localhost ~]# fdisk -l </span></span><br><span class="line"><span class="label">Disk</span> /dev/xvda: <span class="number">42</span>.<span class="number">9</span> GB, <span class="number">42949672960</span> <span class="keyword">bytes</span><br><span class="line"></span><span class="number">255</span> heads, <span class="number">63</span> sectors/track, <span class="number">5221</span> cylinders</span><br><span class="line"><span class="label">Units</span> = cylinders of <span class="number">16065</span> * <span class="number">512</span> = <span class="number">8225280</span> <span class="keyword">bytes</span><br><span class="line"></span><span class="label">Sector</span> size (logical/physical): <span class="number">512</span> <span class="keyword">bytes </span>/ <span class="number">512</span> <span class="keyword">bytes</span><br><span class="line"></span>I/O size (minimum/optimal): <span class="number">512</span> <span class="keyword">bytes </span>/ <span class="number">512</span> <span class="keyword">bytes</span><br><span class="line"></span><span class="label">Disk</span> identifier: <span class="number">0x00014faa</span></span><br><span class="line">    Device <span class="keyword">Boot </span>     Start         <span class="preprocessor">End</span>      <span class="keyword">Blocks </span>  Id  System</span><br><span class="line">/dev/xvda1               <span class="number">1</span>         <span class="number">523</span>     <span class="number">4194304</span>   <span class="number">82</span>  Linux swap / Solaris</span><br><span class="line"><span class="label">Partition</span> <span class="number">1</span> does not <span class="preprocessor">end</span> on cylinder <span class="keyword">boundary.</span><br><span class="line"></span>/dev/xvda2   *         <span class="number">523</span>        <span class="number">5222</span>    <span class="number">37747712</span>   <span class="number">83</span>  Linux</span><br><span class="line"><span class="label">Disk</span> /dev/xvde: <span class="number">493</span>.<span class="number">9</span> GB, <span class="number">493921239040</span> <span class="keyword">bytes</span><br><span class="line"></span><span class="number">255</span> heads, <span class="number">63</span> sectors/track, <span class="number">60049</span> cylinders</span><br><span class="line"><span class="label">Units</span> = cylinders of <span class="number">16065</span> * <span class="number">512</span> = <span class="number">8225280</span> <span class="keyword">bytes</span><br><span class="line"></span><span class="label">Sector</span> size (logical/physical): <span class="number">512</span> <span class="keyword">bytes </span>/ <span class="number">512</span> <span class="keyword">bytes</span><br><span class="line"></span>I/O size (minimum/optimal): <span class="number">512</span> <span class="keyword">bytes </span>/ <span class="number">512</span> <span class="keyword">bytes</span><br><span class="line"></span><span class="label">Disk</span> identifier: <span class="number">0x00000000</span></span><br></pre></td></tr></table></figure></p>
<p>###挂载磁盘/dev/xvde的具体步骤：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# fdisk /dev/xvde </span><br><span class="line">Device contains neither a valid DOS partition table, nor Sun, SGI or OSF disklabel</span><br><span class="line">Building a new DOS disklabel with disk identifier 0xb28f7207.</span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">After that, of course, the previous content won't be recoverable.</span><br><span class="line">Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)</span><br><span class="line">WARNING: DOS-compatible mode is deprecated. It's strongly recommended to</span><br><span class="line">         switch off the mode (command 'c') and <span class="operator"><span class="keyword">change</span> display units <span class="keyword">to</span></span><br><span class="line">         sectors (command <span class="string">'u'</span>).</span><br><span class="line">Command (<span class="keyword">m</span> <span class="keyword">for</span> <span class="keyword">help</span>): <span class="keyword">p</span>^H</span><br><span class="line">Disk /dev/xvde: <span class="number">493.9</span> GB, <span class="number">493921239040</span> <span class="keyword">bytes</span></span><br><span class="line"><span class="number">255</span> heads, <span class="number">63</span> sectors/track, <span class="number">60049</span> cylinders</span><br><span class="line">Units = cylinders <span class="keyword">of</span> <span class="number">16065</span> * <span class="number">512</span> = <span class="number">8225280</span> <span class="keyword">bytes</span></span><br><span class="line">Sector <span class="keyword">size</span> (<span class="keyword">logical</span>/<span class="keyword">physical</span>): <span class="number">512</span> <span class="keyword">bytes</span> / <span class="number">512</span> <span class="keyword">bytes</span></span><br><span class="line"><span class="keyword">I</span>/O <span class="keyword">size</span> (<span class="keyword">minimum</span>/<span class="keyword">optimal</span>): <span class="number">512</span> <span class="keyword">bytes</span> / <span class="number">512</span> <span class="keyword">bytes</span></span><br><span class="line">Disk identifier: <span class="number">0xb28f7207</span></span><br><span class="line">    Device Boot      <span class="keyword">Start</span>         <span class="keyword">End</span>      Blocks   <span class="keyword">Id</span>  <span class="keyword">System</span></span><br><span class="line">Command (<span class="keyword">m</span> <span class="keyword">for</span> <span class="keyword">help</span>): <span class="keyword">m</span></span><br><span class="line">Command <span class="keyword">action</span></span><br><span class="line">   a   toggle a bootable flag</span><br><span class="line">   b   edit bsd disklabel</span><br><span class="line">   <span class="keyword">c</span>   toggle the dos <span class="keyword">compatibility</span> flag</span><br><span class="line">   <span class="keyword">d</span>   <span class="keyword">delete</span> a <span class="keyword">partition</span></span><br><span class="line">   <span class="keyword">l</span>   <span class="keyword">list</span> known <span class="keyword">partition</span> types</span><br><span class="line">   <span class="keyword">m</span>   print this menu</span><br><span class="line">   <span class="keyword">n</span>   <span class="keyword">add</span> a <span class="keyword">new</span> <span class="keyword">partition</span></span><br><span class="line">   o   <span class="keyword">create</span> a <span class="keyword">new</span> <span class="keyword">empty</span> DOS <span class="keyword">partition</span> <span class="keyword">table</span></span><br><span class="line">   <span class="keyword">p</span>   print the <span class="keyword">partition</span> <span class="keyword">table</span></span><br><span class="line">   q   quit <span class="keyword">without</span> saving changes</span><br><span class="line">   s   <span class="keyword">create</span> a <span class="keyword">new</span> <span class="keyword">empty</span> Sun disklabel</span><br><span class="line">   <span class="keyword">t</span>   <span class="keyword">change</span> a <span class="keyword">partition</span><span class="string">'s system id</span><br><span class="line">   u   change display/entry units</span><br><span class="line">   v   verify the partition table</span><br><span class="line">   w   write table to disk and exit</span><br><span class="line">   x   extra functionality (experts only)</span><br><span class="line">Command (m for help): n</span><br><span class="line">Command action</span><br><span class="line">   e   extended</span><br><span class="line">   p   primary partition (1-4)</span><br><span class="line">p</span><br><span class="line">Partition number (1-4): 1</span><br><span class="line">First cylinder (1-60049, default 1): </span><br><span class="line">Using default value 1</span><br><span class="line">Last cylinder, +cylinders or +size&#123;K,M,G&#125; (1-60049, default 60049): </span><br><span class="line">Using default value 60049</span><br><span class="line">Command (m for help): w</span><br><span class="line">The partition table has been altered!</span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span></span></span><br></pre></td></tr></table></figure></p>
<p>###在不重启的情况下识别出来刚才创建的分区：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># partprobe </span></span><br><span class="line">Warning: WARNING: <span class="keyword">the</span> kernel failed <span class="keyword">to</span> re-<span class="command">read</span> <span class="keyword">the</span> partition table <span class="function_start"><span class="keyword">on</span></span> /dev/xvda (Device <span class="keyword">or</span> resource busy).  As a <span class="constant">result</span>, <span class="keyword">it</span> may <span class="keyword">not</span> reflect all <span class="keyword">of</span> your changes <span class="keyword">until</span> <span class="keyword">after</span> reboot.</span><br><span class="line">Warning: Unable <span class="keyword">to</span> open /dev/sr0 <span class="command">read</span>-<span class="command">write</span> (Read-only <span class="type">file</span> system).  /dev/sr0 has been opened <span class="command">read</span>-only.</span><br></pre></td></tr></table></figure></p>
<p>###再次查看各磁盘基本情况：<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="comment">@localhost ~]# fdisk -l </span></span><br><span class="line"><span class="label">Disk</span> /dev/xvda: <span class="number">42</span>.<span class="number">9</span> GB, <span class="number">42949672960</span> <span class="keyword">bytes</span><br><span class="line"></span><span class="number">255</span> heads, <span class="number">63</span> sectors/track, <span class="number">5221</span> cylinders</span><br><span class="line"><span class="label">Units</span> = cylinders of <span class="number">16065</span> * <span class="number">512</span> = <span class="number">8225280</span> <span class="keyword">bytes</span><br><span class="line"></span><span class="label">Sector</span> size (logical/physical): <span class="number">512</span> <span class="keyword">bytes </span>/ <span class="number">512</span> <span class="keyword">bytes</span><br><span class="line"></span>I/O size (minimum/optimal): <span class="number">512</span> <span class="keyword">bytes </span>/ <span class="number">512</span> <span class="keyword">bytes</span><br><span class="line"></span><span class="label">Disk</span> identifier: <span class="number">0x00014faa</span></span><br><span class="line">    Device <span class="keyword">Boot </span>     Start         <span class="preprocessor">End</span>      <span class="keyword">Blocks </span>  Id  System</span><br><span class="line">/dev/xvda1               <span class="number">1</span>         <span class="number">523</span>     <span class="number">4194304</span>   <span class="number">82</span>  Linux swap / Solaris</span><br><span class="line"><span class="label">Partition</span> <span class="number">1</span> does not <span class="preprocessor">end</span> on cylinder <span class="keyword">boundary.</span><br><span class="line"></span>/dev/xvda2   *         <span class="number">523</span>        <span class="number">5222</span>    <span class="number">37747712</span>   <span class="number">83</span>  Linux</span><br><span class="line"><span class="label">Disk</span> /dev/xvde: <span class="number">493</span>.<span class="number">9</span> GB, <span class="number">493921239040</span> <span class="keyword">bytes</span><br><span class="line"></span><span class="number">255</span> heads, <span class="number">63</span> sectors/track, <span class="number">60049</span> cylinders</span><br><span class="line"><span class="label">Units</span> = cylinders of <span class="number">16065</span> * <span class="number">512</span> = <span class="number">8225280</span> <span class="keyword">bytes</span><br><span class="line"></span><span class="label">Sector</span> size (logical/physical): <span class="number">512</span> <span class="keyword">bytes </span>/ <span class="number">512</span> <span class="keyword">bytes</span><br><span class="line"></span>I/O size (minimum/optimal): <span class="number">512</span> <span class="keyword">bytes </span>/ <span class="number">512</span> <span class="keyword">bytes</span><br><span class="line"></span><span class="label">Disk</span> identifier: <span class="number">0xb28f7207</span></span><br><span class="line">    Device <span class="keyword">Boot </span>     Start         <span class="preprocessor">End</span>      <span class="keyword">Blocks </span>  Id  System</span><br><span class="line">/dev/xvde1               <span class="number">1</span>       <span class="number">60049</span>   <span class="number">482343561</span>   <span class="number">83</span>  Linux <span class="comment">/*系统已接入磁盘*/</span></span><br></pre></td></tr></table></figure></p>
<p>###以ext3的格式格式化磁盘：<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="comment">@localhost ~]# mkfs.ext3 /dev/xvde1 </span></span><br><span class="line"><span class="label">mke2fs</span> <span class="number">1</span>.<span class="number">41</span>.<span class="number">12</span> (<span class="number">17</span>-May-<span class="number">2010</span>)</span><br><span class="line"><span class="label">Filesystem</span> label=</span><br><span class="line"><span class="label">OS</span> type: Linux</span><br><span class="line"><span class="keyword">Block </span>size<span class="number">=4096</span> (log<span class="number">=2</span>)</span><br><span class="line"><span class="label">Fragment</span> size<span class="number">=4096</span> (log<span class="number">=2</span>)</span><br><span class="line"><span class="keyword">Stride=0 </span><span class="keyword">blocks, </span><span class="keyword">Stripe </span>width<span class="number">=0</span> <span class="keyword">blocks</span><br><span class="line"></span><span class="number">30146560</span> inodes, <span class="number">120585890</span> <span class="keyword">blocks</span><br><span class="line"></span><span class="number">6029294</span> <span class="keyword">blocks </span>(<span class="number">5</span>.<span class="number">00</span>%) reserved for the super user</span><br><span class="line"><span class="label">First</span> <span class="preprocessor">data</span> <span class="keyword">block=0</span><br><span class="line"></span><span class="label">Maximum</span> filesystem <span class="keyword">blocks=4294967296</span><br><span class="line"></span><span class="number">3680</span> <span class="keyword">block </span>groups</span><br><span class="line"><span class="number">32768</span> <span class="keyword">blocks </span>per group, <span class="number">32768</span> fragments per group</span><br><span class="line"><span class="number">8192</span> inodes per group</span><br><span class="line"><span class="label">Superblock</span> <span class="keyword">backups </span>stored on <span class="keyword">blocks: </span></span><br><span class="line">    <span class="number">32768</span>, <span class="number">98304</span>, <span class="number">163840</span>, <span class="number">229376</span>, <span class="number">294912</span>, <span class="number">819200</span>, <span class="number">884736</span>, <span class="number">1605632</span>, <span class="number">2654208</span>, </span><br><span class="line">    <span class="number">4096000</span>, <span class="number">7962624</span>, <span class="number">11239424</span>, <span class="number">20480000</span>, <span class="number">23887872</span>, <span class="number">71663616</span>, <span class="number">78675968</span>, </span><br><span class="line">    <span class="number">102400000</span></span><br><span class="line"><span class="label">Writing</span> inode tables: done                            </span><br><span class="line"><span class="label">Creating</span> journal (<span class="number">32768</span> <span class="keyword">blocks): </span>done</span><br><span class="line"><span class="label">Writing</span> superblocks <span class="keyword">and </span>filesystem accounting information: done</span><br><span class="line"><span class="label">This</span> filesystem will <span class="keyword">be </span>automatically checked every <span class="number">25</span> mounts or</span><br><span class="line"><span class="number">180</span> days, whichever comes first.  Use tune2fs -c or -i to override.</span><br></pre></td></tr></table></figure></p>
<p>###编辑磁盘挂载配置文件：<br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /etc/fstab </span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># /etc/fstab</span></span><br><span class="line"><span class="comment"># Created by anaconda on Tue Mar 26 14:54:14 2013</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Accessible filesystems, by reference, are maintained under '/dev/disk'</span></span><br><span class="line"><span class="comment"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="type">UUID</span>=<span class="number">5056</span>bbc2-cf00-<span class="number">4</span>f7c-<span class="number">95</span>e1-<span class="number">35</span>be323fc523 /                       ext3    defaults        <span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="type">UUID</span>=c2a7b4a1-c806-<span class="number">46</span>e5-a97d-b9a964fc9e05 swap                    swap    defaults        <span class="number">0</span> <span class="number">0</span></span><br><span class="line">tmpfs                   /dev/shm                tmpfs   defaults        <span class="number">0</span> <span class="number">0</span></span><br><span class="line">devpts                  /dev/pts                devpts  gid=<span class="number">5</span>,mode=<span class="number">620</span>  <span class="number">0</span> <span class="number">0</span></span><br><span class="line">sysfs                   /sys                    sysfs   defaults        <span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">proc</span>                    /<span class="keyword">proc</span>                   <span class="keyword">proc</span>    defaults        <span class="number">0</span> <span class="number">0</span></span><br><span class="line">/dev/xvde1              /opt/                   ext3    defaults        <span class="number">0</span> <span class="number">0</span> /*增加这一行内容*/</span><br></pre></td></tr></table></figure></p>
<p>###执行挂载：<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="property">@localhost</span> ~]<span class="comment"># mount -a</span></span><br></pre></td></tr></table></figure></p>
<p>###查看各分区基本情况：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="preprocessor"># df -h </span></span><br><span class="line">Filesystem            Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/xvda2             <span class="number">36</span>G  <span class="number">2.3</span>G   <span class="number">32</span>G   <span class="number">7</span>% /</span><br><span class="line">tmpfs                  <span class="number">15</span>G     <span class="number">0</span>   <span class="number">15</span>G   <span class="number">0</span>% /dev/shm</span><br><span class="line">/dev/xvde1            <span class="number">453</span>G  <span class="number">199</span>M  <span class="number">430</span>G   <span class="number">1</span>% /opt       <span class="comment">/*/opt分区已挂载上/dev/xvde1这个磁盘*/</span></span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/10/29/" itemprop="url">
                  环回文件与挂载
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-10-29T00:09:00+08:00" content="Oct 29 2013">
              Oct 29 2013
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/10/29/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2013/10/29/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##一、什么是环回文件系统？</p>
<p>环回（loopback）的概念，在很多地方我们都可以看到，出现频率最多的可能就是网络相关的地方了。这里只讨论linux下的环回文件系统。文件系统，这个大家应该都了解，通常，要使用一个文件系统，我们首先要在硬件设备创建文件系统，然后将文件系统挂载在被称为挂载点（mount point）的目录上。那么什么是环回文件系统呢？环回文件系统就是指那些在文件中而非物理设备中创建的文件系统。比如我们可以创建一个文件，然后把这个文件格式化为我们常见ntfs、exfat或者ext4等文件系统格式，然后把它挂载在一个目录上使用。</p>
<p>##二、创建一个特定大小的大文件</p>
<p>①在创建环回文件之前，我们要先要了解怎样去创建一个特定大小的大文件。先看下面这串命令：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd <span class="keyword">if</span>=/dev/zero <span class="keyword">of</span>=<span class="keyword">first</span>.<span class="type">file</span> bs=<span class="number">1</span>M <span class="command">count</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<p>执行结果如下：</p>
<p><img src="http://easydone.qiniudn.com/loop-mount-01.png" alt="">（A）</p>
<p>这个命令会创建一个1MB大小的文件。dd命令是克隆输入的内容，并将副本写入到输出；if（input file）代表输入，stdin、设备文件、普通文件都可以作为输入，这个例子就是用设备文件作为输入；of(output file)代表输出，stdout、设备文件、普通文件等也可作为输出，这个例子是用first.file这个普通文件作为输出；bs代表以字节为单位的块大小（block size，BS），count代表被复制的块数。</p>
<p>②接下来查看下我们刚才创建的文件：</p>
<p><img src="http://easydone.qiniudn.com/loop-mount-02.png" alt="">（B）</p>
<p>其实创建的文件占用空间并不是1MB，比1MB要多，这是为什么呢？主要还是涉及到BS这个概念，具体的原因也比较复杂，真说起来可能又是一片长博客了，<a href="http://djt.qq.com/article/view/620" target="_blank" rel="external">Linux文件系统十问</a>，这篇文章阐释非常清晰。</p>
<p>③上面的命令里有个/dev/zero，这是一个字符设备，它会不断地返回0值；如果不指定if的值，dd默认会从stdin读取输入，同样，如果不指定of的值，dd会将stdout作为默认输出。上面dd命令的输出结果，我们还看到了这样一条数据：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1048576</span> bytes (<span class="number">1.0</span> MB) copied, <span class="number">0.00157623</span> s, <span class="number">665</span> MB/s</span><br></pre></td></tr></table></figure></p>
<p>意思也很容易都看出来，由此，我们还可以用dd命令传输大量的数据，来测试硬盘的读写速度，上面的命令里”if=/dev/zero”不产生IO，所以可以用来测纯写速度；同样，用”of=/dev/null”可以测试纯读速度。当然，前提都是要传输大量的数据。</p>
<p>##三、创建环回文件系统</p>
<p>①创建一个1GB大小的文件：</p>
<p><img src="http://easydone.qiniudn.com/loop-mount-03.png" alt="">（C）</p>
<p>②格式化这个1GB的文件：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">mkfs</span><span class="class">.ext4</span> <span class="tag">file</span><span class="class">.img</span></span><br></pre></td></tr></table></figure></p>
<p><img src="http://easydone.qiniudn.com/loop-mount-04.png" alt="">(D)</p>
<p>③将文件格式化为ext4文件系统，然后我们可以检查下文件系统：</p>
<p><img src="http://easydone.qiniudn.com/loop-mount-05.png" alt="">(E)</p>
<p>##四、挂载环回文件</p>
<p>到了挂载这一步就和我们平常挂载设备文件基本上一样了，但挂载也分几种的：</p>
<p>①下面是一种比较偷懒的挂载方法，我们并没有连接到哪个设备上，在内部，这个环回文件会连接到/dev/loop1或者/dev/loop2的设备上，这时候就需要手动连接设备了。<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="regexp">/mnt/</span>loop   </span><br><span class="line">mount -o loop <span class="keyword">file</span>.img <span class="regexp">/mnt/</span>loop   </span><br><span class="line">losetup <span class="regexp">/dev/</span>loop1 <span class="keyword">file</span>.img   </span><br><span class="line">mount <span class="regexp">/dev/</span>loop1 <span class="regexp">/mnt/</span>loop</span><br></pre></td></tr></table></figure></p>
<p>②上面的方法并不适用于所有的场合，比如我们创建了一个硬盘文件，然后对这个硬盘文件分区并要挂载其中的某个分区，就不能使用mount -o loop了，需要使用下面的方法了。<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">losetup <span class="regexp">/dev/</span>loop1 <span class="keyword">file</span>.img   </span><br><span class="line">fdisk <span class="regexp">/dev/</span>loop1</span><br></pre></td></tr></table></figure></p>
<p>在file.img中创建分区并挂载第一个分区：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">losetup -o <span class="number">32256</span> <span class="regexp">/dev/</span>loop2 <span class="keyword">file</span>.img</span><br></pre></td></tr></table></figure></p>
<p>这里，/dev/loop2就是第一个分区了。其中-o表示偏移量，32256字节是针对DOS分区方案的一个设置，第一个分区自硬盘第32256字节之后开始。同样，我们可以这样设置第二个分区。要卸载的话，就是umount mount_point.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/10/26/" itemprop="url">
                  莫忘初心
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-10-26T23:33:07+08:00" content="Oct 26 2013">
              Oct 26 2013
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/感悟/" itemprop="url" rel="index">
                    <span itemprop="name">感悟</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/10/26/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2013/10/26/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://farm8.staticflickr.com/7441/9648121393_765aa86372_b.jpg" target="_blank" rel="external"><img src="http://farm8.staticflickr.com/7441/9648121393_765aa86372_b.jpg" alt=""></a> 图片来自<a href="http://www.flickr.com/photos/ongsixiao/" target="_blank" rel="external">ongsixiao</a></p>
<p>不要在迷失的道路上停留太久，不要让自己对未来的迷惘变成习惯；不能与优秀同行，也要时常低头，看看脚下的路。<strong>莫忘初心</strong>。</p>
<p>自从越来越多地使用微博、微信，真的是已经好久好久没再写过长文了。如今，经常地突然脑子里感觉有很多很多的东西想要记录，打开博客，刚一点开编辑器，却怎么也不知道该怎么开始。现在想想以前每天写博客的日子，感觉好像是上个世纪的事情。如今，也真的是好久没有静下心来看过一本完整的书了，一直在买书，从来没看过。可能懒惰真就是人的本能，完全不用学习就可以把懒惰的特质发挥到完美到极致。</p>
<p>越来越多地接触这个社会，遇到越来越多的人，关于自己，却从来没有一个交待。每次看到别人类似的自我反省的文章，心里总是略显不屑地呵呵一笑：俗不可耐！却从来没想到过自己还远不如人家，连自省的勇气甚至觉悟都没有。身处这个浮躁的社会里，想要努力地沉淀自己从来都不是一种奢求，而是一种勇气；又有谁愿意承认自己是一个懦弱到害怕直面自己的人？从来都没人阻止自己去追求内心的宁静，除了自己的懦弱和不屑。</p>
<p>在某些方面，我自认为是一个追求完美的人，有一些心灵上的洁癖；也许每一个拥有“追求完美”这种特质的人，都会不自觉地有种孤芳自赏的清高。这“清高”本就是那么的完美，像一块无瑕美玉，让人不舍得伸手去触碰，生怕给美玉留下污点；然而这“清高”终究是一种只存在于自我陶醉的世界里，终有一天必须要看到自己之外的世界。经常看到有人自我反省说：“是不是跑得太快了，以至于忘记了当初的那份纯粹？”再看看自己，恐怕自己连跑都没有跑吧！</p>
<p>这么久以来，自己经历了很多的困难，越来越感觉到生存的不易，一次次地被欺骗，被愚弄，每次总要到跌得遍体鳞伤的时候，就开始无休止地抱怨。一直都是在毫无意义的抱怨，从来没想过是否自己的初衷就是错的，从来都没有想过为什么总是自己，从来没想过自己是不是已经忘记低头看看所处的位置了。一直以来，都仿佛下了一个很大的赌注一般，凭着年少轻狂的那股倔强，毫无目的也毫无顾忌地往前奔，早已经忘记了自己真正想要的到底是什么，甚至已经在与自己的初心完全背道而驰的了。</p>
<p>如今，周围全都是优秀的人，看到别人的优雅，欣赏别人的优雅，多么渴望自己也能优雅起来！意识到迷失了，还是要尽快走出来继续上路，要继续走下去，还要一直走下去。<strong>这很难，可这是自己的初心</strong>。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/09/29/" itemprop="url">
                  JavaScript实现简单的表单验证
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-09-29T08:52:28+08:00" content="Sep 29 2013">
              Sep 29 2013
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/其他/" itemprop="url" rel="index">
                    <span itemprop="name">其他</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/09/29/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2013/09/29/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近开始学习一些前端的知识了，主要有HTML、CSS、JavaScript、DOM、XML等，东西都不难，只是这茫茫多的标签、属性、对象、方法…真的是好烦好烦啊~每写一小段都要翻半天W3的帮助文档，因为不熟悉，所以还不一定能找得到，不过总算是能自己写一些简单的小程序出来。稍微有一点逻辑性的东西主要集中在JS了，对这些新东西，还是有必要记录一下。于是就写了一个简单的表单验证，一方面巩固一下学习的东西，一方面以后要用到表单验证，应该能直接拿来用了。</p>
<p>##用HTML绘出表单##</p>
<p>既然是表单验证，首先肯定是要创建表单，这部分与JS也没什么关系，主要就是HTML标签的堆砌，主要就考察对标签及其属性的熟练程度了。当然如果对CSS很精通的话，可以做出来非常好看，效果很炫的表单，我压根也就没用CSS，单纯地实现了功能。代码如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>FormConfirm<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"keywords"</span> <span class="attribute">content</span>=<span class="value">"keyword1,keyword2,keyword3"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"description"</span> <span class="attribute">content</span>=<span class="value">"表单验证"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"content-type"</span> <span class="attribute">content</span>=<span class="value">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">form</span> <span class="attribute">action</span>=<span class="value">"#"</span> <span class="attribute">method</span>=<span class="value">"get"</span> <span class="attribute">onsubmit</span>=<span class="value">"return check()"</span> <span class="attribute">name</span>=<span class="value">"form"</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="title">table</span> <span class="attribute">border</span>=<span class="value">"1px"</span> <span class="attribute">align</span>=<span class="value">"center"</span> <span class="attribute">style</span>=<span class="value">"width:700px"</span> <span class="attribute">cellspacing</span>=<span class="value">'0'</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;<span class="title">tr</span>&gt;</span></span><br><span class="line">  			<span class="tag">&lt;<span class="title">th</span> <span class="attribute">style</span>=<span class="value">"width:200px;height:35px"</span> <span class="attribute">colspan</span>=<span class="value">"2"</span>&gt;</span>用户注册<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;<span class="title">tr</span>&gt;</span></span><br><span class="line">  			<span class="tag">&lt;<span class="title">th</span> <span class="attribute">style</span>=<span class="value">"width:200px;height:35px"</span>&gt;</span>用户名<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">  			<span class="tag">&lt;<span class="title">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">style</span>=<span class="value">"width:200px"</span> <span class="attribute">name</span>=<span class="value">"userName"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;<span class="title">tr</span>&gt;</span></span><br><span class="line">  			<span class="tag">&lt;<span class="title">th</span> <span class="attribute">style</span>=<span class="value">"width:200px;height:35px"</span>&gt;</span>密码<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">  			<span class="tag">&lt;<span class="title">td</span>&gt;</span></span><br><span class="line">  				<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span>  <span class="attribute">style</span>=<span class="value">"width:200px"</span> <span class="attribute">name</span> = "<span class="attribute">password</span>" /&gt;</span></span><br><span class="line">  			<span class="tag">&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;<span class="title">tr</span>&gt;</span></span><br><span class="line">  			<span class="tag">&lt;<span class="title">th</span> <span class="attribute">style</span>=<span class="value">"width:200px;height:35px"</span>&gt;</span>年龄<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">  			<span class="tag">&lt;<span class="title">td</span>&gt;</span></span><br><span class="line">  				<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">style</span>=<span class="value">"width:200px"</span> <span class="attribute">name</span> = "<span class="attribute">age</span>" /&gt;</span></span><br><span class="line">  			<span class="tag">&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;<span class="title">tr</span>&gt;</span></span><br><span class="line">  			<span class="tag">&lt;<span class="title">th</span> <span class="attribute">style</span>=<span class="value">"width:200px;height:35px"</span>&gt;</span>性别<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">  			<span class="tag">&lt;<span class="title">td</span>&gt;</span></span><br><span class="line">  				<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"radio"</span> <span class="attribute">name</span> = "<span class="attribute">sex</span>" <span class="attribute">value</span>=<span class="value">"0"</span> <span class="attribute">checked</span>/&gt;</span>男</span><br><span class="line">  				<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"radio"</span> <span class="attribute">name</span> = "<span class="attribute">sex</span>" <span class="attribute">value</span>=<span class="value">"1"</span>/&gt;</span>女</span><br><span class="line">  			<span class="tag">&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;<span class="title">tr</span>&gt;</span></span><br><span class="line">  			<span class="tag">&lt;<span class="title">th</span> <span class="attribute">style</span>=<span class="value">"width:200px;height:35px"</span>&gt;</span>爱好<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">  			<span class="tag">&lt;<span class="title">td</span>&gt;</span></span><br><span class="line">	  			<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"checkbox"</span> <span class="attribute">name</span>=<span class="value">"hobby"</span>  <span class="attribute">value</span> = "<span class="attribute">0</span>" &gt;</span>阅读</span><br><span class="line">	  			<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"checkbox"</span> <span class="attribute">name</span>=<span class="value">"hobby"</span>  <span class="attribute">value</span> = "<span class="attribute">1</span>" &gt;</span>旅行</span><br><span class="line">	  			<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"checkbox"</span> <span class="attribute">name</span>=<span class="value">"hobby"</span>  <span class="attribute">value</span> = "<span class="attribute">2</span>" &gt;</span>体育</span><br><span class="line">	  			<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"checkbox"</span> <span class="attribute">name</span>=<span class="value">"hobby"</span>  <span class="attribute">value</span> = "<span class="attribute">3</span>" &gt;</span>音乐</span><br><span class="line">	  			<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"checkbox"</span> <span class="attribute">name</span>=<span class="value">"hobby"</span>  <span class="attribute">value</span> = "<span class="attribute">4</span>" &gt;</span>电影</span><br><span class="line">	  		<span class="tag">&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;<span class="title">tr</span>&gt;</span></span><br><span class="line">  			<span class="tag">&lt;<span class="title">th</span> <span class="attribute">style</span>=<span class="value">"width:200px;height:35px"</span>&gt;</span>学历<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">  			<span class="tag">&lt;<span class="title">td</span>&gt;</span></span><br><span class="line">  				<span class="tag">&lt;<span class="title">select</span> <span class="attribute">name</span>=<span class="value">"education"</span>&gt;</span></span><br><span class="line">  					<span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">""</span> <span class="attribute">selected</span>&gt;</span>- 请选择 -<span class="tag">&lt;/<span class="title">option</span>&gt;</span></span><br><span class="line">  					<span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"0"</span> &gt;</span>大专<span class="tag">&lt;/<span class="title">option</span>&gt;</span></span><br><span class="line">  					<span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"1"</span> &gt;</span>本科<span class="tag">&lt;/<span class="title">option</span>&gt;</span></span><br><span class="line">  					<span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"2"</span> &gt;</span>硕士<span class="tag">&lt;/<span class="title">option</span>&gt;</span></span><br><span class="line">  				<span class="tag">&lt;/<span class="title">select</span>&gt;</span></span><br><span class="line">  			<span class="tag">&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;<span class="title">tr</span>&gt;</span></span><br><span class="line">  			<span class="tag">&lt;<span class="title">th</span> <span class="attribute">style</span>=<span class="value">"width:200px;height:35px"</span> <span class="attribute">colspan</span>=<span class="value">"2"</span>&gt;</span></span><br><span class="line">  				<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"submit"</span> <span class="attribute">value</span>=<span class="value">"注册"</span>/&gt;</span></span><br><span class="line">  			<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;/<span class="title">table</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="undefined"></span><br><span class="line"></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>画出了个模子，接下来就是重头戏了，用JS实现表单的验证。JS代码可以放在html结束标签后面，也可以通过外部引入的方式引入，我这里是直接写在了html结束标签的后面。</p>
<p>##验证之前的分析##</p>
<p>在做验证写代码之前，我们先要做一些准备工作，理清思路，然后根据思路去一步步实现。</p>
<ul>
<li>首先，我们要明确这表单验证需要验证哪些内容，很明显，这里需要验证“用户名”“密码”“年龄”“性别”“爱好”“学历”，一共是这六项内容；</li>
<li>然后，明确验证失败后我们得到怎样的提示；</li>
<li>为了减少工作量，我们可以分析一下这么多的验证里，在实现上某几项有什么共性，如果有共性，怎么把这些共性抽取出来。</li>
</ul>
<p>在这里我希望得到的失败提示是在各项的后面出现红色字体的错误提示，其中“爱好”比较特殊，因为是复选框，若失败直接alert弹出错误提示即可；还有“用户名”“密码”“年龄”这三项在鼠标移出输入框就进行判断，如果与期望值不符，就提示错误。明确前面的东西，就很容易想到他们的共性，在“用户名”“密码”“年龄”“学历”验证失败后，都需要在右侧出现红色的错误提示。</p>
<p>##实现被验证项的共性##</p>
<p>可以定义一个方法实现错误提示的共性，共性的错误提示中不同之处分别是错误提示出现的位置和错误提示的内容，因此可以将出现的位置（where）和提示内容（what）作为方法的两个参数传进去。红色错误提示即红色文本，可以创建一个font标签再设置其颜色属性来实现。当然，当用户输入正确信息后，要删除这些错误信息，删除错误信息只需要明确错误信息出现的位置（where）即可。明确这些，这个方法就容易写了。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//验证错误，添加错误信息</span></span><br><span class="line"><span class="function">function <span class="title">addError</span>(<span class="params"><span class="keyword">where</span>,what</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//获取通过父节点的font子节点数组，如果font数组的长度为0，则创建font标签</span></span><br><span class="line">	<span class="keyword">if</span>(!<span class="keyword">where</span>.parentNode.getElementsByTagName(<span class="string">"font"</span>).length)&#123;</span><br><span class="line">		<span class="comment">//创建font标签 并添加提示信息</span></span><br><span class="line">		<span class="keyword">var</span> font  = document.createElement(<span class="string">"font"</span>);</span><br><span class="line">        <span class="comment">//设置font标签的颜色</span></span><br><span class="line">		font.setAttribute(<span class="string">"color"</span>,<span class="string">"red"</span>);</span><br><span class="line">        <span class="comment">//设置font标签的内容</span></span><br><span class="line">		font.innerHTML = what;</span><br><span class="line">		<span class="comment">//将font标签添加到td上</span></span><br><span class="line">		<span class="keyword">where</span>.parentNode.appendChild(font);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//验证正确后，删除错误信息</span></span><br><span class="line"><span class="function">function <span class="title">removeError</span>(<span class="params"><span class="keyword">where</span></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//存在错误信息，获取父节点的子节点数组，此数组只有一个元素，因此font标签为arr[0]</span></span><br><span class="line">	<span class="keyword">var</span> font =  <span class="keyword">where</span>.parentNode.getElementsByTagName(<span class="string">"font"</span>)[<span class="number">0</span>];</span><br><span class="line">    <span class="comment">//如果设置错误信息的font标签存在，就删除这个font标签</span></span><br><span class="line">	<span class="keyword">if</span>(font)&#123;</span><br><span class="line">		font.parentNode.removeChild(font);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>OK，到这里，就实现了添加删除错误信息的方法，接下来验证“用户名”“密码”“年龄”“学历”的时候，就可以直接调用这两个方法了。</p>
<p>##验证用户名##</p>
<p>验证用户名，其实就是拿用户输入的信息与期望用户输入的信息进行比较，因此首先需要有一个预定义的正则表达式，规定用户必须按照这个正则来输入信息。如果校验通过，就返回true，如果有错误信息，就删除错误信息；如果校验不通过，就返回false，并添加上错误信息。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//验证用户名</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkUserName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//1 根据验证规则创建正则表达式</span></span><br><span class="line">	<span class="keyword">var</span> nameReg = <span class="regexp">/^[a-zA-Z][a-zA-Z0-9_]&#123;5,14&#125;$/g</span>;</span><br><span class="line">	<span class="comment">//2 获得用户填写的用户名，这里可以直接使用document.form来获取表单对象</span></span><br><span class="line">	<span class="keyword">var</span> userName = <span class="built_in">document</span>.form.userName.value;</span><br><span class="line">	<span class="comment">//3 校验</span></span><br><span class="line">	<span class="keyword">if</span>(nameReg.test(userName))&#123;</span><br><span class="line">    	<span class="comment">//调用removeError方法，传入where方法</span></span><br><span class="line">		removeError(<span class="built_in">document</span>.form.userName);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    	<span class="comment">//调用addError方法，传入where和what对应的实际参数</span></span><br><span class="line">		addError(<span class="built_in">document</span>.form.userName,<span class="string">"用户名首字母必须为英文,长度必须在6~15之间"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//当鼠标移出输入框，即失去输入框焦点时验证输入，调用checkUserName方法</span></span><br><span class="line"><span class="built_in">document</span>.form.userName.onblur =<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	checkUserName();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##验证密码、年龄和学历##</p>
<p>实现了用户名的校验，那密码、年龄和学历这三项的验证就简单多了，除了参数跟验证用户名的不一样，其他的基本一样。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//验证密码</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkPassWord</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//验证密码的正则表达式</span></span><br><span class="line">	<span class="keyword">var</span> pwdReg = <span class="regexp">/[a-zA-Z0-9_]&#123;6,15&#125;/g</span>;</span><br><span class="line">	<span class="keyword">var</span> password = <span class="built_in">document</span>.form.password.value;</span><br><span class="line">	<span class="keyword">if</span>(pwdReg.test(password))&#123;</span><br><span class="line">		removeError(<span class="built_in">document</span>.form.password);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		addError(<span class="built_in">document</span>.form.password,<span class="string">"密码长度必须在6~15之间"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.form.password.onblur = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	checkPassWord();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//验证年龄</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkAge</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> age=<span class="built_in">document</span>.form.age.value;</span><br><span class="line">	<span class="keyword">if</span>(+age &gt;= <span class="number">18</span> &amp;&amp; age &lt;= <span class="number">120</span>)&#123;</span><br><span class="line">		removeError(<span class="built_in">document</span>.form.age);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		addError(<span class="built_in">document</span>.form.age,<span class="string">"输入的年龄必须在18~120之间"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.form.age.onblur = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	checkAge();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//验证学历</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkEdu</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> index=<span class="built_in">document</span>.form.education.value;</span><br><span class="line">	<span class="keyword">if</span>(index)&#123;</span><br><span class="line">		removeError(<span class="built_in">document</span>.form.education);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		addError(<span class="built_in">document</span>.form.education,<span class="string">"请选择学历"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>验证学历就不需要再考虑失去焦点时验证的问题了，只需要提交时验证即可。</p>
<p>##验证爱好##</p>
<p>只剩下最后一项验证爱好，同样是提交时后验证。由于“爱好”是复选框，有多个name属性，因此无法使用document.form.attribution来获取属性，这时就可以使用JavaScript警告提示框来输出错误信息了，当然获取habit属性也只能使用document的getElementsByName方法了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//验证爱好</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkHabit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> habits=<span class="built_in">document</span>.getElementsByName(<span class="string">"habit"</span>);</span><br><span class="line">    <span class="comment">//创建一个计数器</span></span><br><span class="line">	<span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//遍历habits数组</span></span><br><span class="line">	<span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; habits.length; i++) &#123;</span><br><span class="line">    	<span class="comment">//当复选框被选中一个，计数器就加1</span></span><br><span class="line">		<span class="keyword">if</span> (habits[i].checked) &#123;</span><br><span class="line">			count++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">//如果计数器大于等于2，就返回true，否则就使用js警告框输出警告信息</span></span><br><span class="line">	<span class="keyword">if</span> (count&gt;=<span class="number">2</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">		alert(<span class="string">"请至少选择两个爱好"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##返回验证结果##</p>
<p>最后一步就是返回验证结果了。调用之前定义的验证各项的方法，任何一项验证不通过都要返回false，即不提交表单。</p>
<figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">function check()&#123;</span><br><span class="line">	var <span class="built_in">flag</span>=<span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">if</span>(!checkUserName())&#123;</span><br><span class="line">		<span class="built_in">flag</span>=<span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(!checkPassWord())&#123;</span><br><span class="line">		<span class="built_in">flag</span>=<span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(!checkAge())&#123;</span><br><span class="line">		<span class="built_in">flag</span>=<span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(!checkEdu())&#123;</span><br><span class="line">		<span class="built_in">flag</span>=<span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(!checkHabit())&#123;</span><br><span class="line">		<span class="built_in">flag</span>=<span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	return <span class="built_in">flag</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/09/23/" itemprop="url">
                  Android添加桌面widget插件
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-09-23T11:02:32+08:00" content="Sep 23 2013">
              Sep 23 2013
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/09/23/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2013/09/23/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##Widget的概述<br>可以添加桌面Widget是Android的一大特色，AppWidget是在HomeScreen上显示的小部件，提供直观的交互操作，有许多的表现形式，如视频、音乐、地图、新闻、游戏等等，它的根本思想来源于代码的复用。通过在HomeScreen长按，在弹出的对话框中选择Widget部件进行构建，长按部件并拖动到垃圾箱可以删除。</p>
<p>Android中的Widget主要设计以下几个类：</p>
<ul>
<li>AppWidgerProvider</li>
<li>AppWidgetManager</li>
<li>RemoteViews</li>
</ul>
<p>Widget的核心是AppWidgetProvider，属于广播接收者，是四大组件之一，在AppWidgetProvider这个类中，一共有五个方法，其中有一个<strong>onReceive(Context, Intent)</strong>方法，分别调用了其他四个空实现的方法onEnabled(Context context)，onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds)，onDeleted(Context context, int[] appWidgetIds)，onDisabled(Context context)，而被调用的这四个方法刚好就是一个Widget的生命周期。</p>
<p>RemoteView是用来描述一个跨进程显示的View，也就是说这个View是在另外一个进程中显示的，它可以获取layout的布局文件，并且提供了可以修改View内容的一些简答操作。AppWidgetProvider提供Widget的生命周期，真正显示界面的是AppWidgetHostView（这是在Launcher中实现的），这中间就是通过RemoteView来沟通。通过RemoteView来告诉Launcher你想要的AppWidget长什么样。</p>
<p>##如何创建一个Widget</p>
<p>###配置清单文件<br>要创建一个Widget，第一步就是要在清单文件中配置：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">receiver</span> <span class="attribute">android:name</span>=<span class="value">"ExampleAppWidgetProvider"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">action</span> <span class="attribute">android:name</span>=<span class="value">"android.appwidget.action.APPWIDGET_UPDATE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">intent-filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta-data</span> <span class="attribute">android:name</span>=<span class="value">"android.appwidget.provider"</span></span><br><span class="line">        <span class="attribute">android:resource</span>=<span class="value">"@xml/example_appwidget_info"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">receiver</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>###定义Widget的生命周期<br>然后要写一个类继承AppWidgetProvider，并重写AppWidgetProvider的代表生命周期的四个空方法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.widget1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.appwidget.AppWidgetManager;</span><br><span class="line"><span class="keyword">import</span> android.appwidget.AppWidgetProvider;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExampleAppWidgetProvider</span> <span class="keyword">extends</span> <span class="title">AppWidgetProvider</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"ExampleAppWidgetProvider"</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 可用</span></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onEnabled</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">super</span>.onEnabled(context);</span><br><span class="line">		Log.i(TAG, <span class="string">"onEnabled"</span>);</span><br><span class="line">		<span class="comment">// 启动服务</span></span><br><span class="line">		context.startService(<span class="keyword">new</span> Intent(context, MyService.class));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 更新</span></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUpdate</span><span class="params">(Context context, AppWidgetManager appWidgetManager,</span><br><span class="line">			<span class="keyword">int</span>[] appWidgetIds)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">super</span>.onUpdate(context, appWidgetManager, appWidgetIds);</span><br><span class="line">		Log.i(TAG, <span class="string">"onUpdate"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 删除</span></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDeleted</span><span class="params">(Context context, <span class="keyword">int</span>[] appWidgetIds)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">super</span>.onDeleted(context, appWidgetIds);</span><br><span class="line">		Log.i(TAG, <span class="string">"onDeleted"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 不可用</span></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDisabled</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">super</span>.onDisabled(context);</span><br><span class="line">		Log.i(TAG, <span class="string">"onDisabled"</span>);</span><br><span class="line">		<span class="comment">// 停止服务</span></span><br><span class="line">		context.stopService(<span class="keyword">new</span> Intent(context, MyService.class));</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>###定义Widget的基本属性<br>然后呢，就需要提供一个XML文件来定义Widget的基本属性（位于res/xml/..）目录下，右键新建Android资源文件，选择类型AppWidgetProvider即可。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- android:minWidth="294dp" 宽</span><br><span class="line">    android:minHeight="72dp"高</span><br><span class="line">    android:initialLayout="@layout/example_appwidget" widget的布局</span><br><span class="line">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">appwidget-provider</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attribute">android:minWidth</span>=<span class="value">"294dp"</span></span><br><span class="line">    <span class="attribute">android:minHeight</span>=<span class="value">"72dp"</span></span><br><span class="line">    <span class="attribute">android:initialLayout</span>=<span class="value">"@layout/example_appwidget"</span></span><br><span class="line">    &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">appwidget-provider</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>###定义Widget的布局<br>接着需要提供一个Widget界面布局的XML文件（位于res/layout/…），需要注意的是该XML使用的组件必须是RemoteViews所支持的，目前原生API支持的组件如下：</p>
<ul>
<li>FrameLayout</li>
<li>LinearLayout</li>
<li>RelativeLayout</li>
<li>AnalogClock</li>
<li>Button</li>
<li>Chronmeter</li>
<li>ImageButton</li>
<li>ImageView</li>
<li>ProgressBar</li>
<li>TextView</li>
</ul>
<p><strong>如果使用这些组件之外的组件，在Widget创建的时候，会出现一个android.view.InflateException的异常。</strong></p>
<p>因此这也就导致一些功能或者样式无法实现，如很基本的List或文本编辑都是无法直接实现的，如果想自定义Widget中的View的话只能通过修改Framework来提供相应组件的支持。</p>
<p>代码示例如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">RelativeLayout</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attribute">android:layout_width</span>=<span class="value">"match_parent"</span></span><br><span class="line">    <span class="attribute">android:layout_height</span>=<span class="value">"match_parent"</span></span><br><span class="line">    <span class="attribute">android:orientation</span>=<span class="value">"vertical"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">TextView</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/tv_time"</span></span><br><span class="line">        <span class="attribute">android:layout_width</span>=<span class="value">"fill_parent"</span></span><br><span class="line">        <span class="attribute">android:layout_height</span>=<span class="value">"fill_parent"</span></span><br><span class="line">        <span class="attribute">android:text</span>=<span class="value">"这是widget桌面插件"</span></span><br><span class="line">        <span class="attribute">android:background</span>=<span class="value">"#f00"</span></span><br><span class="line">        <span class="attribute">android:textColor</span>=<span class="value">"@android:color/black"</span></span><br><span class="line">        <span class="attribute">android:gravity</span>=<span class="value">"right"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">Button</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/bt_open"</span></span><br><span class="line">        <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span></span><br><span class="line">        <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">        <span class="attribute">android:text</span>=<span class="value">"复制号码到拨号盘"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>###Widget动态实例</p>
<p>接下来，可以实例实现一个Widget显示系统时间和复制号码到拨号盘。</p>
<p>一般Widget所显示的内容都是需要动态变化的，因此需要开启服务在后台操作。AppWidgetManager就是负责更新Widget的内容，AppWidgetManager类中提供一个获取实例的方法，getInstance(Context context)，AppWidgetManager也提供了三个更新Widget的方法，由于AppWidgetProvider是一个广播接收者，很显然，需要传递一个组件进去，所以在这里我需要选择<strong>updateAppWidget(ComponentName provider, RemoteViews views)</strong>这个方法来对AppWidget进行更新操作。在上面继承的AppWidgetProvider类，在Widget的生命周期方法中，已经做了启动和停止服务的操作，然后我只要写一个MyService类继承Service即可，当然，后台服务需要开启线程，要重写run()方法。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.widget1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Timer;</span><br><span class="line"><span class="keyword">import</span> java.util.TimerTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.PendingIntent;</span><br><span class="line"><span class="keyword">import</span> android.app.Service;</span><br><span class="line"><span class="keyword">import</span> android.appwidget.AppWidgetManager;</span><br><span class="line"><span class="keyword">import</span> android.content.ComponentName;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.net.Uri;</span><br><span class="line"><span class="keyword">import</span> android.os.IBinder;</span><br><span class="line"><span class="keyword">import</span> android.widget.RemoteViews;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 定时器</span></span><br><span class="line">	Timer timer = <span class="keyword">null</span>;</span><br><span class="line">	TimerTask task = <span class="keyword">new</span> TimerTask() &#123;</span><br><span class="line"></span><br><span class="line">		<span class="annotation">@Override</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">			<span class="comment">// 更新app widget</span></span><br><span class="line">			<span class="comment">// 使用AppWidgetManager 更新</span></span><br><span class="line">			<span class="comment">// App Widget管理器</span></span><br><span class="line">			AppWidgetManager awm = AppWidgetManager</span><br><span class="line">					.getInstance(getApplicationContext());</span><br><span class="line">			<span class="comment">// 组件</span></span><br><span class="line">			ComponentName provider = <span class="keyword">new</span> ComponentName(getApplicationContext(),</span><br><span class="line">					ExampleAppWidgetProvider.class);</span><br><span class="line">			<span class="comment">// 远端布局（不在activity上的布局）</span></span><br><span class="line">			RemoteViews views = <span class="keyword">new</span> RemoteViews(getPackageName(),</span><br><span class="line">					R.layout.example_appwidget);</span><br><span class="line">			<span class="comment">// 获取系统当前的时间</span></span><br><span class="line">			<span class="keyword">long</span> millis = System.currentTimeMillis();</span><br><span class="line">			SimpleDateFormat format = <span class="keyword">new</span> SimpleDateFormat(</span><br><span class="line">					<span class="string">"yyyy-MM-dd hh:mm:ss"</span>);</span><br><span class="line">			<span class="comment">// 格式化系统时间</span></span><br><span class="line">			String text = format.format(millis);</span><br><span class="line">			<span class="comment">// 设置显示内容</span></span><br><span class="line">			views.setTextViewText(R.id.tv_time, text);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 复制号码到拨号盘</span></span><br><span class="line">			Intent intent = <span class="keyword">new</span> Intent();</span><br><span class="line">			intent.setAction(Intent.ACTION_DIAL);</span><br><span class="line">			intent.setData(Uri.parse(<span class="string">"tel:8888"</span>));</span><br><span class="line">			PendingIntent pendingIntent = PendingIntent.getActivity(</span><br><span class="line">					getApplicationContext(), <span class="number">100</span>, intent, <span class="number">0</span>);</span><br><span class="line">			<span class="comment">// 事件</span></span><br><span class="line">			views.setOnClickPendingIntent(R.id.bt_open, pendingIntent);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 更新</span></span><br><span class="line">			awm.updateAppWidget(provider, views);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">super</span>.onCreate();</span><br><span class="line">		timer = <span class="keyword">new</span> Timer();</span><br><span class="line">		<span class="comment">// task任务 delay延时执行 period 周期</span></span><br><span class="line">		timer.schedule(task, <span class="number">0</span>, <span class="number">500</span>);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> IBinder <span class="title">onBind</span><span class="params">(Intent intent)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">super</span>.onDestroy();</span><br><span class="line">		<span class="comment">// 取消任务</span></span><br><span class="line">		timer.cancel();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样一个简单的桌面插件显示系统时间和复制号码到拨号盘的小程序就完成了。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/09/19/" itemprop="url">
                  怎样拒绝邻居想要蹭WiFi的请求
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-09-19T16:29:51+08:00" content="Sep 19 2013">
              Sep 19 2013
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/随笔/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/09/19/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2013/09/19/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>刚把wifi密码告诉了斜对面的哥们儿。现在来回答下这个问题。</p>
<p>在郑州被深深地伤害之后，彻底对郑州失望，就只身来南京了，7月份过来的。以前没来过南京，当初只是因为想赶紧逃离，比较讨厌北京，又不想去上海，广州也玩儿够了，觉得无趣，最后一冲动就跑来南京了。等到来了南京，发现原来南京还有个同学，着实帮我了不少；不过工作确定之后，我们就分开了，距离非常远。我来到了一个人也不认识的地方。租房的问题解决之后，感觉一切都蛮好，比想象中的顺利。只是觉得，有点孤单。</p>
<p>跟人合租的房子，房子挺大，不过是五个小居室，住的人挺多，一个客厅，房租很便宜（这是我最看重的）。平常早上上班离开家，锁上门；下班回到家，再把们一关，谁也不认识谁。一个人躺在床上，盯着天花板，说不出的孤独；刚去的日子，晚上还给家人朋友打电话或者打一盘DotA，后来慢慢的就不想再打了。想找个人说话，却没有。</p>
<p>直到一天早上，去洗漱，碰见斜对门的兄弟，突然觉得不说点什么，好像很尴尬。就异常别扭地挤出来个“早”。从那以后，貌似碰见的次数也越来越多了。斜对门的大哥跟老婆一起住，跟我一样，都是去年毕业，俩人大学谈恋爱四年，毕业之后立马就领证了。我刚来那段时间，兄弟在为工作的事忙活，现在是已经确定了要自己创业。刚毕业、刚结婚的小青年儿夫妻俩相濡以沫，日子过的不富裕，不过倒是有说不出的温馨。</p>
<p>一天晚上，下班之后去买了西瓜和方便面，前一天特意从易迅上买了个电热水器（不得不说易迅的物流实在是太给力了，上午下单，下午两点多就送到了），准备回家烧水吃泡面。回到家，面对一个大西瓜，突然发现，原来自己没有刀，没法切啊…怎么办？最后硬着头皮，敲小夫妻的门，借来了刀，切了西瓜，想把西瓜送给小夫妻俩，捧着切好的西瓜站在他们门口半天，不敢敲门。突然，门开了，看见小嫂子端着饺子…场面真有趣。最后，我用西瓜“换了”饺子。心里说不出的温暖。从那之后，我们就经常相互送好吃的；都是属于面对陌生人那种有点闷的人，所以也就是敲门，把东西往对方手里一送，转身就撤；不说话的。</p>
<p>昨天晚上，我给家里人打电话，说是中秋放假三天不回去了，本来打算十一回去，结果十一要加班，也就没法回去了。刚打完电话，有人敲门，开门一看，是斜对面的大哥。“兄弟，我看你这过节好像也是一个人，我叫了几个朋友，明天过来一起过节，你明天也跟我们一起过吧！”突然，我也不知道怎么回答，愣了有十几秒，尴尬地笑着，憋出来一句，“那就太谢谢了啊……”霎那间，暖流直窜脑门！今天夫妻俩做了菜，非常丰盛哦，有八个菜，我们几个吃吃玩玩，愉快地度过了这一天。整个席间，我都被一股股暖流冲击着！</p>
<p>刚收了摊子。去兄弟屋里坐了一会儿，聊天，发现他们屋里没有路由器，是网线直接插电脑上用的。他们夫妻俩都是教育行业的，对IT相关的基本一窍不通，我正对门的是俩小姑娘，由于我们住的屋子里在我去之前只有一条4M的宽带，网口在俩小姑娘屋里。我来了之后，又从外面拉了一条10M的宽带。两个小姑娘告诉小夫妻俩不能在他们屋里放路由器，而且不能从外面拉网线，夫妻俩就信了，还跟她们共同分担宽带费用，我瞬间明白了一切。不过没给他们夫妻俩说，我把自己的WiFi密码告诉了他们，然后把他们的笔记本设置了一下，做了个无线热点。</p>
<p>呀！写到这里，突然想起来，在一起这么长时间，还不知道他们名字和其他的任何联系方式呢…</p>
<p>一个人在外面，真心是不容易。每个人都是那么地平凡，自己的故事也同样发生在这个城市其他一百万人身上，但是与这么多善良的人萍水相逢，即使明天就要别离，孤单和伤感也会因为这暖心默默远去。谢谢你们，每一个人。一个WiFi密码，换来的也许是更多无法用金钱衡量的东西。</p>
<p>原文链接：<a href="http://www.zhihu.com/question/21661505/answer/18949069" target="_blank" rel="external">不熟悉的邻居来敲门问我的 Wi-Fi 密码，说只是平时用下上网，我该怎么回绝？</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/08/14/" itemprop="url">
                  Java1.5新特性
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-08-14T21:08:13+08:00" content="Aug 14 2013">
              Aug 14 2013
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/08/14/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2013/08/14/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>“JDK1.5”（开发代号猛虎）的一个重要主题就是通过新增一些特性来简化开发,这些特性包括<strong>泛型,for-each 循环,自动装包/拆包,枚举,可变参数,静态导入</strong>.使用这些特性有助于我们编写更加清晰,精悍,安全的代码.</p>
<p>下面我们简单介绍一下这些新特性.</p>
<p>##<strong>泛型(Generic)</strong>##</p>
<p>C++通过模板技术可以指定集合的元素类型,而Java在1.5之前一直没有相对应的功能.一个集合可以放任何类型的对象,相应地从集合里面拿对象的时候我们也不得不对他们进行<strong>强制类型转换</strong>.”猛虎”引入了<strong>泛型</strong>,它允许指定集合里元素的类型,这样你可以得到强类型在编译时刻进行类型检查的好处.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Collection&lt;<span class="built_in">String</span>&gt; c = <span class="keyword">new</span> ArrayList();</span><br><span class="line">c.add(<span class="keyword">new</span> <span class="built_in">Date</span>());</span><br></pre></td></tr></table></figure>
<p>编译器会给出报错.</p>
<p>##<strong>For-Each循环</strong>##<br><em>For-Each</em>循环得加入简化了集合的遍历.假设我们要遍历一个集合对其中的元素进行一些处理.典型的代码为:</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> processAll(<span class="type">Collection</span> c)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">Iterator</span> i=c.<span class="keyword">iterator</span>(); i.hasNext();)&#123;</span><br><span class="line">        <span class="type">MyClass</span> myObject = (<span class="type">MyClass</span>)i.next();</span><br><span class="line">        myObject.process();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用For-Each循环,我们可以把代码改写成:</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processAll</span><span class="params">(Collection&lt;MyClass&gt; c)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (MyClass myObject :c)</span><br><span class="line">    myObject.process();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这段代码要比上面清晰许多,并且<strong>避免了强制类型转换</strong>.</p>
<p>##<strong>自动装箱/拆箱(Autoboxing/unboxing)</strong>##</p>
<p>自动装箱/拆箱大大方便了<strong>基本类型数据和它们包装类</strong>地使用.</p>
<ol>
<li><strong>自动装箱</strong>：基本类型自动转为包装类.(int &gt;&gt; Integer)</li>
<li><strong>自动拆箱</strong>：包装类自动转为基本类型.(Integer &gt;&gt; int)</li>
</ol>
<p>在JDK1.5之前,我们总是对集合不能存放基本类型而耿耿于怀,现在自动转换机制解决了我们的问题.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">3</span>;</span><br><span class="line">Collection c = <span class="keyword">new</span> ArrayList();</span><br><span class="line">c.add(a);<span class="comment">//自动装箱,int转换成Integer.</span></span><br><span class="line">Integer b = <span class="keyword">new</span> Integer(<span class="number">2</span>);</span><br><span class="line">c.add(b + <span class="number">2</span>); <span class="comment">//自动拆箱,Integer转换成int</span></span><br></pre></td></tr></table></figure>
<p>这里Integer先自动转换为int进行加法运算,然后int再次转换为Integer.</p>
<p>##<strong>枚举(Enums)</strong>##</p>
<p>JDK1.5加入了一个全新类型的“类”－<strong>枚举</strong>类型.为此JDK1.5引入了一个新关键字<em>enmu</em>.我们可以这样来定义一个枚举类型.</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">enum</span> <span class="title">Color</span>&#123;</span></span><br><span class="line">    <span class="constant">Red</span>,</span><br><span class="line">    <span class="constant">White</span>,</span><br><span class="line">    <span class="constant">Blue</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后可以这样来使用Color myColor = Color.Red.</p>
<p>枚举类型还提供了两个有用的静态方法<em>values()</em>和<em>valueOf()</em>. 我们可以很方便地使用它们,例如</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (<span class="attribute">Color</span> c <span class="value">: Color.<span class="function">values</span>())&#123;</span><br><span class="line">    System.out.<span class="function">println</span>(c);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##<strong>可变参数(Varargs)</strong>##</p>
<p>可变参数使程序员可以声明一个接受<strong>可变数目参数</strong>的方法.注意,可变参数必须是方法声明中的<strong>最后一个参数</strong>.假设我们要写一个简单的方法打印一些对象:</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">util.<span class="command">write</span>(obj1);</span><br><span class="line">util.<span class="command">write</span>(obj1,obj2);</span><br><span class="line">util.<span class="command">write</span>(obj1,obj2,obj3);</span><br></pre></td></tr></table></figure>
<p>在JDK1.5之前,我们可以用重载来实现,但是这样就需要写很多的重载方法,显得不是很有效.如果使用可变参数的话我们只需要一个方法就行了</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> write(<span class="keyword">Object</span>... objs) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">Object</span> obj: objs)&#123;</span><br><span class="line">        System.out.<span class="built_in">println</span>(obj);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在引入可变参数以后，Java的反射包也更加方便使用了。对于c.getMethod(“test”, new Object[0]).invoke(c.newInstance(), new Object[0]))，现在我们可以这样写了c.getMethod(“test”).invoke(c.newInstance())，这样的代码比原来清楚了很多.</p>
<p>##<strong>静态导入(Static Imports)</strong>##</p>
<p>要使用用静态成员（方法和变量）我们必须给出提供这个方法的类.使用静态导入可以使被导入类的所有静态变量和静态方法在当前类直接可见,使用这些静态成员无需再给出他们的类名.</p>
<figure class="highlight monkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"><span class="keyword">import</span> static java.lang.Math.*;</span></span><br><span class="line">……</span><br><span class="line">r = <span class="built_in">sin</span>(<span class="built_in">PI</span> * <span class="number">2</span>); //无需再写r = Math.<span class="built_in">sin</span>(Math.<span class="built_in">PI</span>);</span><br></pre></td></tr></table></figure>
<p>不过,过度使用这个特性也会一定程度上降低代码地可读性.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://easydone.qiniudn.com/default_avatar.jpg"
               alt="Ailurus" />
          <p class="site-author-name" itemprop="name">Ailurus</p>
          <p class="site-description motion-element" itemprop="description">Android Developer</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">128</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">190</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://plus.google.com/u/0/105488752510871319253" target="_blank" title="G+">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  G+
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://github.com/liangzhitao" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/liangzhitao" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://facebook.com/liangzhitao" target="_blank" title="Facebook">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Facebook
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/208087666" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://nicodelee.sinaapp.com" title="日志" target="_blank">日志</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://iamwent.github.io" title="大城小黄" target="_blank">大城小黄</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://xiequan.info" title="谢权" target="_blank">谢权</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://veaer.com" title="veaer" target="_blank">veaer</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://kymjs.com" title="kymjs@张涛" target="_blank">kymjs@张涛</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://wuxiaolong.me" title="吴小龙同學" target="_blank">吴小龙同學</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://yifeiyuan.me" title="程序亦非猿" target="_blank">程序亦非猿</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://lovinghuan.com" title="大B哥" target="_blank">大B哥</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://abner-nimengbo.cn" title="阿布" target="_blank">阿布</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://itangqi.me" title="汤奇" target="_blank">汤奇</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2012 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ailurus</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'easydonecn';
      var disqus_identifier = 'page/8/index.html';
      var disqus_title = '';
      var disqus_url = '';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
    </script>
  



  
  
  

  

  

</body>
</html>
